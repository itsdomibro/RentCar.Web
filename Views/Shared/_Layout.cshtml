<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - RentCar</title>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/views.css" asp-append-version="true" />
</head>

<body>
    <div id="wrapper">
        @* Side Bar *@
        <nav id="sidebar">
            <div class="sidebar-header">
                <a asp-controller="Cars" asp-action="Index" class="sidebar-brand">RentCar</a>
            </div>
                
            <div class="sidebar-content">
                @if (!User.IsInRole("Owner")) {
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Cars" ? "active" : "")" asp-controller="Cars" asp-action="Index">Cars</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "MyRentals" ? "active" : "")" asp-controller="MyRentals" asp-action="Index">My Rentals</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["Action"]?.ToString() == "Contact" ? "active" : "")" asp-controller="Contact" asp-action="Index">Contact</a>
                        </li>
                    </ul>
                }

                @if (User.IsInRole("Owner")) {
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Cars" ? "active" : "")" asp-controller="Cars" asp-action="Index">Cars</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Rentals" ? "active" : "")" asp-controller="Rentals" asp-action="Index">Rentals</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Maintenances" ? "active" : "")" asp-controller="Maintenances" asp-action="Index">Maintenances</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Employees" ? "active" : "")" asp-controller="Employees" asp-action="Index">Employees</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["Controller"]?.ToString() == "Payments" ? "active" : "")" asp-controller="Payments" asp-action="Index">Payments</a>
                        </li>
                    </ul>
                }
            </div>

            <div class="sidebar-footer"></div>

        </nav>

        @* Content *@
        <div id="page-content-wrapper">
            @* Top Bar *@
            <nav class="topbar">
                <div class="topbar-left">
                    <button class="sidebar-toggle" id="sidebarToggle" type="button">☰</button>
                </div>

                <div class="topbar-right">
                    <ul class="topbar-nav">
                        @if (User.Identity.IsAuthenticated) {
                            <li class="topbar-item">
                                <a class="btn btn-sm btn-outline-primary" asp-controller="Profile" asp-action="Index">Hello, @User.Identity.Name!</a>
                            </li>
                        } else {
                            <li class="topbar-item">
                                <a class="btn btn-sm btn-outline-primary" asp-controller="Auth" asp-action="Login">Login</a>
                            </li>
                            <li class="topbar-item">
                                <a class="btn btn-sm btn-primary" asp-controller="Auth" asp-action="Register">Register</a>
                             </li>
                        }
                    </ul>
                </div>
            </nav>

            @* Main Content *@
            <div class="main-content">
                @RenderBody()
            </div>
        </div>
    </div>

    <script>
        document.getElementById("sidebarToggle").addEventListener("click", function () {
            document.getElementById("sidebar").classList.toggle("hidden");
        });
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>